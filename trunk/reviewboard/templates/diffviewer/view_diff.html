{% extends "base.html" %}
{% block title %}Diff Viewer{% endblock %}

{% block content %}
<div id="diffs">
{% if error %}
{{ error }}
{% else %}
<a name="{{header_id}}"></a>
{% include "diffviewer/changeindex.html" %}

{% for file in files %}
<a name="{{file.index}}"></a>
<table class="sidebyside">
 <colgroup>
  <col class="controls" />
  <col class="left" width="50%" />
  <col class="right" width="50%" />
 </colgroup>
 <thead>
  <tr>
   <th>&nbsp;</th>
   <th>{{ file.depot_filename }}</th>
   <th>{{ file.user_filename }}</th>
  </tr>
 </thead>
 <tbody>
{% for chunk in file.chunks %}
  <tr{% ifnotequal chunk.change "" %} class="{{chunk.change}}"{% endifnotequal %}>
   <td>{% ifnotequal chunk.change "" %}<a href="#{{chunk.nextid}}">▼</a><a href="#{{chunk.previd}}">▲</a>{% endifnotequal %}</td>
   <td>{% ifnotequal chunk.index None %}<a name="{{file.index}}.{{chunk.index}}"></a>{% endifnotequal %}<pre>{{ chunk.oldtext|escape }}</pre></td>
   <td><pre>{{ chunk.newtext|escape }}</pre></td>
  </tr>
{% endfor %}
 </tbody>
</table></li>
{% endfor %}
<a name="{{footer_id}}"></a>
{% include "diffviewer/changeindex.html" %}
{% endif %}
</div>
{% endblock %}
