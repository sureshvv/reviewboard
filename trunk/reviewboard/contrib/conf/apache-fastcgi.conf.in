AddHandler fastcgi-script .fcgi

# We have a large timeout on this because some operations may take a long
# time (such as viewing a large diff where many the files need to be
# retrieved from the repository.  The path here doesn't really matter, but the
# port needs to match the one used by the fastcgi server.
FastCGIExternalServer @pythondir@/reviewboard/htdocs/reviewboard.fcgi -host 127.0.0.1:3033 -idle-timeout 60

<VirtualHost *:80>
	ServerName example.com
	DocumentRoot @pythondir@/reviewboard/htdocs/

	# Alias static media requests to filesystem
	Alias /media @djangodir@/contrib/admin/media
	Alias /css @pythondir@/reviewboard/htdocs/images
	Alias /images @pythondir@/reviewboard/htdocs/images
	Alias /scripts @pythondir@/reviewboard/htdocs/scripts
	Alias /errordocs @pythondir@/reviewboard/htdocs/errordocs

	# Error handlers
	ErrorDocument 500 /errordocs/500.html

	# Direct all other requests to the fastcgi server
	RewriteEngine on
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^/(.*)$ /reviewboard.fcgi/$1 [QSA,L]
</VirtualHost>
