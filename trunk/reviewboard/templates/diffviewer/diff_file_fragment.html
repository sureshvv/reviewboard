{% if standalone and error %}
{{error}}
{% endif %}
<table class="sidebyside" id="file{{file.index}}">
 <colgroup>
  <col class="controls" />
  <col class="line" />
  <col class="left" />
  <col class="right" />
 </colgroup>
 <thead>
  <tr onClick="gotoAnchor('{{file.index}}');">
   <th rowspan="2" class="controls">&nbsp;</th>
   <th rowspan="2" >&nbsp;</th>
   <th colspan="2">{{ file.user_filename }}</th>
  </tr>
  <tr>
   <th class="rev">{{file.revision}}</th>
   <th class="rev">New Change</th>
  </tr>
 </thead>
{% for chunk in file.chunks %}
{%  if not chunk.collapsable or not collapseall %}
 <tbody id="chunk{{file.index}}.{{chunk.index}}"{% ifnotequal chunk.change "equal" %} class="{{chunk.change}}" onClick="gotoAnchor('{{file.index}}.{{chunk.index}}');"{% else %}{% if chunk.collapsable %} class="collapsable"{% endif %}{% endifnotequal %}>
  <tr>
   <th class="controls" rowspan="{{chunk.numlines}}">{% ifnotequal chunk.index None %}<a name="{{file.index}}.{{chunk.index}}"></a>{% endifnotequal %}&nbsp;</td>
{% for line in chunk.lines %}
   <th>{{line.0}}</td>
   <td><pre>{{ line.1|escape }}</pre></td>
   <td><pre>{{ line.2|escape }}</pre></td>
  </tr>
{% if not forloop.last %}
  <tr>
{% endif %}
{% endfor %}
 </tbody>
{% else %}
 <tbody class="collapsed">
  <tr>
   <th class="controls">&nbsp;</th>
   <th>...</th>
   <td colspan="2">{{ chunk.numlines }} line{{chunk.numlines|pluralize}} hidden</td>
  </tr>
 </tbody>
{% endif %}
{% endfor %}
</table>
